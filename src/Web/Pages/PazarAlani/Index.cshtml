@page "/Pazar-Alani"

<section class="pazar-layout">
  <h2 class="section-title">Pazar Alanı</h2>

  <!-- Üstte sade filtre satırı -->
  <div class="pazar-filters-bar card">
    <div class="pazar-filters-inline">
      <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
        <button type="button" class="btn small primary" id="pazarTypeListings">İlan</button>
        <button type="button" class="btn small" id="pazarTypeServices">Hizmet</button>
      </div>

      <!-- İlan filtreleri -->
      <div id="pazarFiltersListings" style="display:flex;flex-wrap:wrap;gap:12px;align-items:center;">
        <input id="pazarListingQ" type="text" placeholder="Anahtar kelime" class="input" />
        <select id="pazarListingLocation" class="input"></select>
        <select id="pazarListingCategory" class="input"></select>
        <input id="pazarListingMinBudget" type="number" placeholder="Min bütçe" class="input" />
        <input id="pazarListingMaxBudget" type="number" placeholder="Maks bütçe" class="input" />
      </div>

      <!-- Hizmet filtreleri -->
      <div id="pazarFiltersServices" style="display:none;flex-wrap:wrap;gap:12px;align-items:center;">
        <select id="pazarServicePurpose" class="input"></select>
        <input id="pazarServiceTerm" type="text" placeholder="Hizmet (örn: otopark)" class="input" />
        <select id="pazarServiceCategory" class="input"></select>
        <select id="pazarServiceLocation" class="input"></select>
        <input id="pazarServiceMinBudget" type="number" placeholder="Min bütçe" class="input" />
        <input id="pazarServiceMaxBudget" type="number" placeholder="Maks bütçe" class="input" />
      </div>

      <button id="searchBtnPazar" class="btn primary">Ara</button>
      <button id="showAllBtnPazar" class="btn">Hepsini Göster</button>
    </div>
  </div>

  <!-- Alt kısım: sol ilanlar, ortada geniş harita, sağda mekanlar sütunu -->
  <div class="pazar-grid">
    <main class="pazar-listings card compact" id="pazarListingsPanel">
      <div class="pazar-listings-header">
        <h3 id="pazarListingsTitle">Aktif İlanlar</h3>
        <button type="button" class="pazar-listings-toggle" id="pazarListingsToggle">Geniş Görünüm →</button>
      </div>
      <div id="pazarListingGrid" class="pazar-listings-inner"></div>
    </main>

    <section class="pazar-map">
      <div id="pazarMap" class="pazar-map-inner"></div>
    </section>

    <aside class="pazar-places card" id="pazarPlacesPanel">
      <div class="pazar-places-header">
        <h3 id="pazarSideTitle" style="margin:0;">Haritadaki Mekanlar</h3>
        <button type="button" class="pazar-places-toggle" id="pazarPlacesToggle">← Geniş Görünüm</button>
      </div>
      <!-- Şimdilik boş; JS dolduracak veya placeholder kalabilir -->
      <div id="pazarPlaces" class="pazar-places-list"></div>
    </aside>
  </div>
</section>

<dialog id="pazarBidDialog" class="bid-dialog">
  <div class="bid-dialog__inner" role="document">
    <header>
      <h3 id="pazarBidTitle">Teklif Ver</h3>
      <button type="button" id="closePazarBid" aria-label="Kapat">✕</button>
    </header>
    <section id="pazarBidContent"></section>
  </div>
</dialog>

<style>
.pazar-places-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.bid-dialog::backdrop {
  background: rgba(0,0,0,0.6);
}

.bid-dialog {
  border: none;
  border-radius: 16px;
  padding: 0;
  max-width: 720px;
  width: 100%;
  background: var(--card);
  color: var(--text);
}

.bid-dialog__inner {
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.bid-dialog__inner header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#closePazarBid {
  border: none;
  background: none;
  color: inherit;
  font-size: 20px;
  cursor: pointer;
}

.bid-dialog__listing-info {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--border);
}

.bid-dialog__budget {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--primary);
}

.bid-dialog__items {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin: 16px 0;
}

.bid-item-row {
  display: grid;
  grid-template-columns: 1fr auto 120px;
  gap: 12px;
  align-items: center;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
}

.bid-item-row:last-child {
  border-bottom: none;
}

.bid-item-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 500;
}

.bid-dialog__actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
}
</style>
